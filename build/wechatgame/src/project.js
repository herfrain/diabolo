window.__require=function o(t,e,i){function n(s,l){if(!e[s]){if(!t[s]){var h=s.split("/");if(h=h[h.length-1],!t[h]){var d="function"==typeof __require&&__require;if(!l&&d)return d(h,!0);if(c)return c(h,!0);throw new Error("Cannot find module '"+s+"'")}}var r=e[s]={exports:{}};t[s][0].call(r.exports,function(o){return n(t[s][1][o]||o)},r,r.exports,o,t,e,i)}return e[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({background:[function(o,t,e){"use strict";cc._RF.push(t,"d2524x00NRMRb6YtPKczGwB","background"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],biabolo:[function(o,t,e){"use strict";cc._RF.push(t,"247a5mF5MRJA6SJMBEEeF3a","biabolo"),cc.Class({extends:cc.Component,properties:function(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}({x:0,y:0,x_speed:0,y_speed:0,isFly:!1,rigidbody:null,mouseJoint:null,ropes:{default:null,type:cc.Node},rope:null,physicsBoxCollider:null,leftNode:null,rightNode:null,leftJoint:null},"leftJoint",null),onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.rigidbody=this.node.getComponent(cc.RigidBody);var o=this.ropes.children;this.rope=o[0],this.leftNode=this.rope.getChildByName("left"),this.rightNode=this.rope.getChildByName("right"),this.leftJoint=this.leftNode.getComponent(cc.DistanceJoint),this.rightJoint=this.rightNode.getComponent(cc.DistanceJoint),this.mouseJoint=this.node.getComponent(cc.MouseJoint),this.physicsBoxCollider=this.rope.getComponent(cc.PhysicsBoxCollider),this.physicsBoxCollider.enabled=!0,cc.log("mouseJoint\u662f\u5426\u53ef\u7528\uff1a"+this.mouseJoint.enabled),cc.log(this.mouseJoint),cc.log(this.rigidbody),cc.log(this.leftNode),cc.log(this.leftJoint)},touchBegin:function(o){console.info("begin")},touchMove:function(o){console.info("move")},calV2:function(){var o=this.leftNode.convertToWorldSpaceAR(cc.v2(0,0)),t=this.rightNode.convertToWorldSpaceAR(cc.v2(0,0)),e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),i=o.sub(e),n=t.sub(e),c=i.add(n);return c=c.scale(cc.v2(5.5,5.5)),cc.log(i),cc.log(n),cc.log(c),c},touchEnd:function(o){console.info("end"),this.isFly||(this.rigidbody.linearVelocity=this.calV2(),this.cancelLRJoint(),this.mouseJoint.destroy(),this.mouseJoint=null,this.isFly=!0,this.physicsBoxCollider.enabled=!1)},cancelLRJoint:function(){this.leftJoint.enabled=!1,this.leftJoint.connectedBody=null,this.rightJoint.enabled=!1,this.rightJoint.connectedBody=null,this.leftJoint.apply(),this.rightJoint.apply()},bandLRJoint:function(o){this.rope=o.node,this.leftNode=this.rope.getChildByName("left"),this.rightNode=this.rope.getChildByName("right"),this.leftJoint=this.leftNode.getComponent(cc.DistanceJoint),this.rightJoint=this.rightNode.getComponent(cc.DistanceJoint),this.leftJoint.connectedBody=this.rigidbody,this.rightJoint.connectedBody=this.rigidbody,this.leftJoint.enabled=!0,this.rightJoint.enabled=!0,this.leftJoint.apply(),this.rightJoint.apply()},bandMouseJoint:function(){this.node.addComponent(cc.MouseJoint),this.mouseJoint=this.node.getComponent(cc.MouseJoint)},start:function(){},onCollisionEnter:function(o,t){cc.log("enter")},onCollisionExit:function(o,t){console.log("on collision enter"),this.rigidbody.linearVelocity.y<0&&(this.bandLRJoint(o),cc.log(this.rope),cc.log(this.leftJoint),this.bandMouseJoint(),this.isFly=!1,this.physicsBoxCollider.enabled=!0)},update:function(o){}}),cc._RF.pop()},{}],camera:[function(o,t,e){"use strict";cc._RF.push(t,"9cce8+hfNNCp4yDN66VRCrA","camera");o("random");cc.Class({extends:cc.Component,properties:{ropes:{default:null,type:cc.Node},ropePrefab:{default:null,type:cc.Prefab},once:!0},start:function(){cc.log(this.ropePrefab)},update:function(o){var t=this;this.node.y++,Math.abs(this.node.y)%200==0&&cc.loader.loadRes("rope.prefab",function(o,e){if(!o){var i=cc.instantiate(e);i.y=t.node.y+t.node.parent.height/2,t.once?(i.x=-200,t.once=!1):(i.x=200,t.once=!0),t.ropes.addChild(i)}})}}),cc._RF.pop()},{random:"random"}],control:[function(o,t,e){"use strict";cc._RF.push(t,"44f50x/KFpAw5dor1zLYRl4","control"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],diabolo:[function(o,t,e){"use strict";var i;function n(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}cc._RF.push(t,"b1ca5JWsBNNnI2DSNoHAI5O","diabolo"),cc.Class({extends:cc.Component,properties:(i={x:0,y:0,x_speed:0,y_speed:0,isFly:!1,rigidbody:null,mouseJoint:null,ropes:{default:null,type:cc.Node},rope:null,physicsBoxCollider:null,leftNode:null,rightNode:null,leftJoint:null},n(i,"leftJoint",null),n(i,"camera",null),i),onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.rigidbody=this.node.getComponent(cc.RigidBody);var o=this.ropes.children;this.rope=o[0],this.leftNode=this.rope.getChildByName("left"),this.rightNode=this.rope.getChildByName("right"),this.leftJoint=this.leftNode.getComponent(cc.DistanceJoint),this.rightJoint=this.rightNode.getComponent(cc.DistanceJoint),this.mouseJoint=this.node.getComponent(cc.MouseJoint),this.physicsBoxCollider=this.rope.getComponent(cc.PhysicsBoxCollider),this.physicsBoxCollider.enabled=!0,this.camera=cc.find("Canvas/Main Camera"),cc.log(this.rope),cc.log(this.physicsBoxCollider)},touchBegin:function(o){console.info("begin")},touchMove:function(o){console.info("move")},calV2:function(){var o=this.leftNode.convertToWorldSpaceAR(cc.v2(0,0)),t=this.rightNode.convertToWorldSpaceAR(cc.v2(0,0)),e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),i=o.sub(e),n=t.sub(e),c=i.add(n);return c=c.scale(cc.v2(5.5,5.5)),cc.log(i),cc.log(n),cc.log(c),c},touchEnd:function(o){console.info("end"),this.isFly||(this.rigidbody.linearVelocity=this.calV2(),this.cancelLRJoint(),this.mouseJoint.destroy(),this.mouseJoint=null,this.isFly=!0,this.physicsBoxCollider.enabled=!1)},cancelLRJoint:function(){this.leftJoint.enabled=!1,this.leftJoint.connectedBody=null,this.rightJoint.enabled=!1,this.rightJoint.connectedBody=null,this.leftJoint.apply(),this.rightJoint.apply()},bandLRJoint:function(o){this.rope=o.node,this.leftNode=this.rope.getChildByName("left"),this.rightNode=this.rope.getChildByName("right"),this.leftJoint=this.leftNode.getComponent(cc.DistanceJoint),this.rightJoint=this.rightNode.getComponent(cc.DistanceJoint),this.leftJoint.connectedBody=this.rigidbody,this.rightJoint.connectedBody=this.rigidbody,this.leftJoint.enabled=!0,this.rightJoint.enabled=!0,this.leftJoint.apply(),this.rightJoint.apply()},bandMouseJoint:function(){this.node.addComponent(cc.MouseJoint),this.mouseJoint=this.node.getComponent(cc.MouseJoint)},start:function(){},onCollisionEnter:function(o,t){cc.log("enter")},onCollisionExit:function(o,t){console.log("on collision enter"),this.rigidbody.linearVelocity.y<0&&(this.bandLRJoint(o),cc.log(this.rope),cc.log(this.leftJoint),this.bandMouseJoint(),this.isFly=!1,this.physicsBoxCollider=this.rope.getComponent(cc.PhysicsBoxCollider),this.physicsBoxCollider.enabled=!0)},update:function(o){this.node.isValid&&this.node.y<this.camera.y-this.camera.parent.height/2&&this.node.destroy()}}),cc._RF.pop()},{}],game:[function(o,t,e){"use strict";cc._RF.push(t,"6a4d0yjitpCCJ++b/TO9xVO","game"),cc.Class({extends:cc.Component,properties:{diabolo:{default:null,type:cc.Node}},gameOver:function(){cc.director.loadScene("game")},start:function(){},update:function(o){this.diabolo.isValid||this.gameOver()}}),cc._RF.pop()},{}],label:[function(o,t,e){"use strict";cc._RF.push(t,"f2960WD5L1L36OIEK+w+6tN","label"),cc.Class({extends:cc.Component,properties:{height:0,preH:0,once:!0,label:null,diabolo:{default:null,type:cc.Node},diaboloComponent:null},onLoad:function(){this.diaboloComponent=this.diabolo.getComponent("diabolo"),this.label=this.node.getComponent(cc.Label)},start:function(){},update:function(o){if(this.node.y++,!this.diaboloComponent.isFly&&this.once){this.once=!1;var t=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y-this.preH;this.height+=t,this.preH=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y,this.label.string=this.height+"m",cc.log("height:"+this.height)}else this.diaboloComponent.isFly&&!this.once&&(this.once=!0)}}),cc._RF.pop()},{}],"physics-settings":[function(o,t,e){"use strict";cc._RF.push(t,"f84f40WhtVFvZ7kQfcBYFPZ","physics-settings"),cc.game.on(cc.game.EVENT_ENGINE_INITED,function(){var o=cc.director.getPhysicsManager();o.enabled=!0,o.debugDrawFlags=cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit;var t=cc.director.getCollisionManager();t.enabled=!0,t.enabledDebugDraw=!0,t.enabledDrawBoundingBox=!0}),cc._RF.pop()},{}],random:[function(o,t,e){"use strict";cc._RF.push(t,"1edd5RrgGxGo5z904wdamjF","random"),t.exports={m:150,getRndInteger:function(o,t){return Math.random()<.5?Math.floor(Math.random()*(-this.m-o+1))+o:Math.floor(Math.random()*(t-this.m+1))+this.m},getRndIntegerUp:function(o,t){return Math.floor(Math.random()*(t-o+1))+o}},cc._RF.pop()},{}],ropes:[function(o,t,e){"use strict";cc._RF.push(t,"a41b5dzcipPVLLYbm8ycZdI","ropes");o("random");cc.Class({extends:cc.Component,properties:{ropes:null,diabolo:null,diaboloComponent:null},onLoad:function(){this.diabolo=cc.find("Canvas/diabolo"),this.diaboloComponent=this.diabolo.getComponent("diabolo");var o=this.node.children[0],t=o.getChildByName("left"),e=o.getChildByName("right"),i=t.getComponent(cc.DistanceJoint),n=e.getComponent(cc.DistanceJoint);i.connectedBody=this.diaboloComponent.rigidbody,n.connectedBody=this.diaboloComponent.rigidbody,cc.log(o)},start:function(){this.ropes=this.node.children},update:function(o){cc.log(this.ropes.length)}}),cc._RF.pop()},{random:"random"}],rope:[function(o,t,e){"use strict";cc._RF.push(t,"465adkbtJ9IWZaEXIyjLTvG","rope"),cc.Class({extends:cc.Component,properties:{physicsBoxCollider:null,diabolo:null,diaboloComponent:null,used:!1,camera:null},onLoad:function(){this.diabolo=cc.find("Canvas/diabolo"),this.physicsBoxCollider=this.node.getComponent(cc.PhysicsBoxCollider),this.diaboloComponent=this.diabolo.getComponent("diabolo"),this.camera=cc.find("Canvas/Main Camera")},start:function(){},update:function(o){this.node.isValid&&(this.node.y<this.diabolo.y&&this.physicsBoxCollider.enabled&&this.diaboloComponent.isFly?this.physicsBoxCollider.enabled=!1:this.diaboloComponent.isFly||this.physicsBoxCollider.enabled||(this.physicsBoxCollider.enabled=!0),this.node.y<this.camera.y-this.camera.parent.height/2&&this.node.destroy())}}),cc._RF.pop()},{}],touch:[function(o,t,e){"use strict";cc._RF.push(t,"2e84bh/1uNLUJAhr0+D+G8o","touch"),cc.Class({extends:cc.Component,properties:{},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchBegin,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this)},touchBegin:function(o){console.info("begin")},touchMove:function(o){console.info("move")},touchEnd:function(o){console.info("end")},touchCancel:function(o){console.info("cancel")}}),cc._RF.pop()},{}]},{},["background","biabolo","camera","control","diabolo","game","label","physics-settings","random","rope","ropes","touch"]);