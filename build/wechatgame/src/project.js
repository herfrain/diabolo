window.__require=function o(t,e,i){function n(c,a){if(!e[c]){if(!t[c]){var l=c.split("/");if(l=l[l.length-1],!t[l]){var r="function"==typeof __require&&__require;if(!a&&r)return r(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+c+"'")}}var h=e[c]={exports:{}};t[c][0].call(h.exports,function(o){return n(t[c][1][o]||o)},h,h.exports,o,t,e,i)}return e[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<i.length;c++)n(i[c]);return n}({backgrounds:[function(o,t,e){"use strict";cc._RF.push(t,"d2524x00NRMRb6YtPKczGwB","backgrounds"),cc.Class({extends:cc.Component,properties:{backgrounds:null,camera:{default:null,type:cc.Node}},onLoad:function(){this.backgrounds=this.node.children},start:function(){},update:function(o){var t=this;this.camera.y+this.camera.parent.height>this.backgrounds[this.backgrounds.length-1].y&&(cc.loader.loadRes("background.prefab",function(o,e){if(!o){var i=cc.instantiate(e),n=t.backgrounds[t.backgrounds.length-1];i.y=n.y+n.height,i.x=0,t.node.addChild(i)}}),cc.loader.loadRes("background2.prefab",function(o,e){if(!o){var i=cc.instantiate(e),n=t.backgrounds[t.backgrounds.length-1];i.y=n.y+n.height,i.x=0,t.node.addChild(i)}}));for(var e=0;e<this.backgrounds.length;e++)this.backgrounds[e].isValid&&this.backgrounds[e].y+this.backgrounds[e].height/2<this.camera.y-this.camera.parent.height/2&&this.backgrounds[e].destroy()}}),cc._RF.pop()},{}],bigStar:[function(o,t,e){"use strict";cc._RF.push(t,"f6dae2emy5NwJf+XzhTLhEN","bigStar"),cc.Class({extends:cc.Component,properties:{diabolo:null,diaboloComponent:null,diaboloEffect:null,pickUpAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.diabolo=cc.find("Canvas/diabolo"),this.diaboloComponent=this.diabolo.getComponent("diabolo"),this.diaboloEffect=this.diabolo.getComponent("diabolo_effect")},onCollisionEnter:function(o,t){this.diaboloComponent.isFly&&(this.diabolo.scale=2,this.diaboloComponent.rigidbody.gravityScale=12,this.diaboloEffect.big=!0,cc.audioEngine.playEffect(this.pickUpAudio,!1),this.node.destroy())},start:function(){}}),cc._RF.pop()},{}],blingRope:[function(o,t,e){"use strict";cc._RF.push(t,"69b87/RK0JOzJTf0pHPQbJH","blingRope"),cc.Class({extends:cc.Component,properties:{graphics:null,once:!0},onLoad:function(){this.graphics=this.getComponent(cc.Graphics)},start:function(){this.schedule(function(){this.once?(this.graphics.strokeColor.fromHEX("#FFFFFF"),this.once=!1):(this.graphics.strokeColor.fromHEX("#FF3C3C"),this.once=!0)},.5)},update:function(o){}}),cc._RF.pop()},{}],camera:[function(o,t,e){"use strict";cc._RF.push(t,"9cce8+hfNNCp4yDN66VRCrA","camera"),cc.Class({extends:cc.Component,properties:{diabolo:{default:null,type:cc.Node},diaboloComponent:null,preH:0},onLoad:function(){this.diaboloComponent=this.diabolo.getComponent("diabolo")},start:function(){this.preH=this.diaboloComponent.rope.y},update:function(o){if(this.diaboloComponent.y-this.preH>0){var t=this.diaboloComponent.y-this.preH;this.preH=this.diaboloComponent.y;var e=cc.moveBy(2,cc.v2(0,t)).easing(cc.easeCubicActionOut());this.node.runAction(e)}}}),cc._RF.pop()},{}],diabolo_effect:[function(o,t,e){"use strict";cc._RF.push(t,"de9a1H28/BJaZow4BrfRwQc","diabolo_effect"),cc.Class({extends:cc.Component,properties:{diabolo:null,diaboloComponent:null,big:!1,small:!1,smallOrBigTime:0,jump:!1,jumpTime:0,ropesNode:null,ropes:null},onLoad:function(){this.diabolo=cc.find("Canvas/diabolo"),this.diaboloComponent=this.diabolo.getComponent("diabolo"),this.ropesNode=cc.find("Canvas/ropes"),this.ropes=this.ropesNode.children},start:function(){},update:function(o){var t=this;if((this.big||this.small)&&this.smallOrBigTime<=0&&(this.diabolo.scale=1.5,this.diaboloComponent.rigidbody.gravityScale=10,this.big=!1,this.small=!1,this.smallOrBigTime=5),this.jump&&this.diaboloComponent.rigidbody.linearVelocity.y<0){for(var e=0;e<this.ropes.length;e++){if(this.ropes[e].y<this.diabolo.y+30)this.ropes[e].getComponent("rope").isDisappear=!0}cc.loader.loadRes("rope2.prefab",function(o,e){if(!o){var i=cc.instantiate(e);i.y=t.diabolo.y-100,i.x=t.diabolo.x,t.node.parent.addChild(i),t.scheduleOnce(function(){i.destroy()},3)}}),this.jump=!1}}}),cc._RF.pop()},{}],diabolo:[function(o,t,e){"use strict";var i;function n(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}cc._RF.push(t,"b1ca5JWsBNNnI2DSNoHAI5O","diabolo"),cc.Class({extends:cc.Component,properties:(i={y:0,isFly:!1,rigidbody:null,mouseJoint:null,ropes:null,rope:null,physicsBoxCollider:null,leftNode:null,rightNode:null,leftJoint:null},n(i,"leftJoint",null),n(i,"camera",null),n(i,"popupAudio",{default:null,type:cc.AudioClip}),n(i,"pullAudio",{default:null,type:cc.AudioClip}),i),onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchBegin,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.rigidbody=this.node.getComponent(cc.RigidBody),this.ropes=cc.find("Canvas/ropes");var o=this.ropes.children;this.rope=o[0],this.leftNode=this.rope.getChildByName("left"),this.rightNode=this.rope.getChildByName("right"),this.leftJoint=this.leftNode.getComponent(cc.DistanceJoint),this.rightJoint=this.rightNode.getComponent(cc.DistanceJoint),this.mouseJoint=this.node.getComponent(cc.MouseJoint),this.physicsBoxCollider=this.rope.getComponent(cc.PhysicsBoxCollider),this.y=this.rope.y,this.camera=cc.find("Canvas/Main Camera")},start:function(){this.leftJoint.connectedBody=this.rigidbody,this.rightJoint.connectedBody=this.rigidbody,this.physicsBoxCollider.enabled=!0},touchBegin:function(o){cc.audioEngine.play(this.pullAudio,!1,2)},touchMove:function(o){},calV2:function(){var o=this.leftNode.convertToWorldSpaceAR(cc.v2(0,0)),t=this.rightNode.convertToWorldSpaceAR(cc.v2(0,0)),e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),i=o.sub(e),n=t.sub(e),s=i.add(n);return s=s.scale(cc.v2(5.5,5.5))},touchEnd:function(o){this.isFly||(this.rigidbody.linearVelocity=this.calV2(),this.cancelLRJoint(),this.mouseJoint.destroy(),this.mouseJoint=null,this.isFly=!0,this.physicsBoxCollider.enabled=!1,cc.audioEngine.play(this.popupAudio,!1,1))},cancelLRJoint:function(){this.leftJoint.enabled=!1,this.leftJoint.connectedBody=null,this.rightJoint.enabled=!1,this.rightJoint.connectedBody=null,this.leftJoint.apply(),this.rightJoint.apply()},update:function(o){this.isFly&&this.node.y>this.camera.y+this.camera.parent.height/2?this.y=this.node.y:this.isFly||(null!=this.rope&&this.rope.isValid?this.y=this.rope.y:this.rope.isValid||null!=this.mouseJoint&&(this.mouseJoint.destroy(),this.mouseJoint=null,this.isFly=!0)),this.node.isValid&&this.node.y<this.camera.y-this.camera.parent.height/2-10&&this.node.destroy(),null!=this.rope&&this.rope.isValid&&this.ropes.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.v2(0,0))).y>this.rope.y&&(this.rope=null)}}),cc._RF.pop()},{}],effects:[function(o,t,e){"use strict";cc._RF.push(t,"77cebhi1zdKqY8ghHi+NGRb","effects");var i=o("random");cc.Class({extends:cc.Component,properties:{effects:null,camera:null,ropes:null,ropesNode:null},onLoad:function(){this.camera=cc.find("Canvas/Main Camera"),this.ropesNode=cc.find("Canvas/ropes")},getRandomNum:function(){return parseInt(5*Math.random())+1},getItem:function(o){switch(o){case 0:return null;case 1:return"star_big";case 2:return"star_small";case 3:return"jump";case 4:return"fly";case 5:return"lantern_scoreUp"}},createEffect:function(){if(!(this.effects.length>6)){var o=this.node,t=this.getRandomNum(),e=this.getItem(t),n=0;this.ropes.length-5>=0&&(n=i.getRndIntegerUp(this.ropes.length-5,this.ropes.length-1));var s=this.ropes[n].x,c=this.ropes[n].y;cc.loader.loadRes(e,function(t,e){var n=cc.instantiate(e);n.x=s+i.getRndIntegerUp(-80,80),n.y=c+i.getRndIntegerUp(-200,200),o.addChild(n)})}},start:function(){this.effects=this.node.children,this.ropes=this.ropesNode.children,this.schedule(this.createEffect,10*Math.random()+10)},update:function(o){for(var t=0;t<this.effects.length;t++)this.effects[t].isValid&&this.effects[t].y<this.camera.y-this.camera.parent.height/2&&this.effects[t].destroy()}}),cc._RF.pop()},{random:"random"}],flyEffect:[function(o,t,e){"use strict";cc._RF.push(t,"fe449ZtqHxJC5OIeX7s6na2","flyEffect"),cc.Class({extends:cc.Component,properties:{diabolo:null,diaboloComponent:null,diaboloEffect:null,height:0,preH:0,camera:null,flyAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.diabolo=cc.find("Canvas/diabolo"),this.diaboloComponent=this.diabolo.getComponent("diabolo"),this.diaboloEffect=this.diabolo.getComponent("diabolo_effect"),this.camera=cc.find("Canvas/Main Camera"),this.height=1e4},onCollisionEnter:function(o,t){this.diaboloComponent.isFly&&(this.diaboloEffect.jump=!0,this.diaboloComponent.rigidbody.linearVelocity=cc.v2(0,this.height),cc.audioEngine.playEffect(this.flyAudio,!1),this.node.destroy())},start:function(){}}),cc._RF.pop()},{}],gameReStart:[function(o,t,e){"use strict";cc._RF.push(t,"b766d+fv6BJ9Ze+X8EYXhZ/","gameReStart"),cc.Class({extends:cc.Component,properties:{},gameReStart:function(){cc.director.loadScene("game")},start:function(){}}),cc._RF.pop()},{}],game:[function(o,t,e){"use strict";cc._RF.push(t,"6a4d0yjitpCCJ++b/TO9xVO","game");o("effects");cc.Class({extends:cc.Component,properties:{diabolo:{default:null,type:cc.Node},camera:{default:null,type:cc.Node},label:{default:null,type:cc.Node},gameOverAudio:{default:null,type:cc.AudioClip},infoes:{default:null,type:cc.Node},once:!0},onLoad:function(){this.infoes.active=!1;var o=cc.sys.localStorage.getItem("firstGame");console.info(o),console.info(""==o),console.info(null==o),""!=o&&null!=o||(cc.sys.localStorage.setItem("firstGame","false"),this.infoes.active=!0,console.info("showInfo"))},hideInfo:function(){this.infoes.active=!1,cc.log("hide")},gameOver:function(){cc.audioEngine.playEffect(this.gameOverAudio,!1),cc.director.loadScene("restart")},start:function(){},update:function(o){!this.diabolo.isValid&&this.once&&(this.gameOver(),this.once=!1)}}),cc._RF.pop()},{effects:"effects"}],jumpEffect:[function(o,t,e){"use strict";cc._RF.push(t,"70185ydUI9CroLNmof6upPE","jumpEffect"),cc.Class({extends:cc.Component,properties:{diabolo:null,diaboloComponent:null,diaboloEffect:null,height:0,preH:0,camera:null,jumpAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.diabolo=cc.find("Canvas/diabolo"),this.diaboloComponent=this.diabolo.getComponent("diabolo"),this.diaboloEffect=this.diabolo.getComponent("diabolo_effect"),this.camera=cc.find("Canvas/Main Camera"),this.height=3e3},onCollisionEnter:function(o,t){this.diaboloComponent.isFly&&(this.diaboloEffect.jump=!0,this.diaboloComponent.rigidbody.linearVelocity=cc.v2(0,this.height),cc.audioEngine.playEffect(this.jumpAudio,!1),this.node.destroy())},start:function(){}}),cc._RF.pop()},{}],label:[function(o,t,e){"use strict";cc._RF.push(t,"f2960WD5L1L36OIEK+w+6tN","label");var i=o("score");cc.Class({extends:cc.Component,properties:{height:0,preH:0,heightDifference:0,once:!0,label:null,diabolo:null,diaboloComponent:null},onLoad:function(){this.diabolo=cc.find("Canvas/diabolo"),this.diaboloComponent=this.diabolo.getComponent("diabolo"),this.label=this.node.getComponent(cc.Label),this.label.string="0",i.score=this.height},start:function(){this.preH=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y},update:function(o){if(!this.diaboloComponent.isFly&&this.once){this.once=!1;var t=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y-this.preH;this.height+=t,this.height=parseInt(this.height),this.preH=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y}else this.diaboloComponent.isFly&&!this.once&&(this.once=!0);var e=parseInt(this.label.string);e<this.height?(e+=11,this.label.string=parseInt(e)):e>this.height&&(e--,this.label.string=parseInt(e)),i.score=this.height}}),cc._RF.pop()},{score:"score"}],lineTo:[function(o,t,e){"use strict";cc._RF.push(t,"356d50jTSZGZqusgjHWsMgr","lineTo"),cc.Class({extends:cc.Component,properties:{leftNode:null,rightNode:null,diabolo:null,diaboloComponent:null,graphics:null,once:!0},onLoad:function(){this.diabolo=cc.find("Canvas/diabolo"),this.diaboloComponent=this.diabolo.getComponent("diabolo"),this.leftNode=this.node.getChildByName("left"),this.rightNode=this.node.getChildByName("right"),this.graphics=this.getComponent(cc.Graphics),this.drawLine()},drawLine:function(){this.graphics.clear(),this.graphics.moveTo(this.leftNode.x,this.leftNode.y),this.graphics.lineTo(this.rightNode.x,this.rightNode.y),this.graphics.close(),this.graphics.stroke()},update:function(o){if(this.node==this.diaboloComponent.rope){var t=this.node.convertToNodeSpaceAR(this.diabolo.convertToWorldSpaceAR(cc.v2(0,0)));this.graphics.clear(),this.graphics.moveTo(this.diaboloComponent.leftNode.x,this.diaboloComponent.leftNode.y),this.graphics.lineTo(t.x,t.y),this.graphics.lineTo(this.diaboloComponent.rightNode.x,this.diaboloComponent.rightNode.y),this.graphics.stroke()}else this.graphics.clear(),this.graphics.moveTo(this.leftNode.x,this.leftNode.y),this.graphics.lineTo(this.rightNode.x,this.rightNode.y),this.graphics.close(),this.graphics.stroke()}}),cc._RF.pop()},{}],"physics-settings":[function(o,t,e){"use strict";cc._RF.push(t,"f84f40WhtVFvZ7kQfcBYFPZ","physics-settings"),cc.game.on(cc.game.EVENT_ENGINE_INITED,function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0}),cc._RF.pop()},{}],random:[function(o,t,e){"use strict";cc._RF.push(t,"1edd5RrgGxGo5z904wdamjF","random"),t.exports={getRndIntegerUp:function(o,t){return Math.floor(Math.random()*(t-o+1))+o},newRndItem:function(){var o=10*Math.random;return o>7&&(console.log("\u51b3\u5b9a\u662f\u5426\u751f\u6210\u9053\u5177\u7684\u968f\u673a\u6570\uff1a"+o),!0)}},cc._RF.pop()},{}],ropes:[function(o,t,e){"use strict";cc._RF.push(t,"a41b5dzcipPVLLYbm8ycZdI","ropes");var i=o("score"),n=o("random");cc.Class({extends:cc.Component,properties:{ropes:null,camera:{default:null,type:cc.Node}},onLoad:function(){for(var o=cc.find("Canvas/diabolo").getComponent("diabolo"),t=this.node.children[0],e=t,i=0;i<5;i++){var s=cc.instantiate(e);s.y=e.y+n.getRndIntegerUp(100,200),s.x=n.getRndIntegerUp(-this.camera.parent.width/2+100,this.camera.parent.width/2-100),e=s,this.node.addChild(s)}var c=t.getChildByName("left"),a=t.getChildByName("right"),l=c.getComponent(cc.DistanceJoint),r=a.getComponent(cc.DistanceJoint);l.connectedBody=o.rigidbody,r.connectedBody=o.rigidbody},start:function(){this.ropes=this.node.children},update:function(o){if(this.camera.y+this.camera.parent.height>this.ropes[this.ropes.length-1].y)for(var t=this.ropes[this.ropes.length-1],e=0;e<5;e++){var s=cc.instantiate(t);i.score<1e4?s.y=t.y+n.getRndIntegerUp(100,200):i.score<3e4?s.y=t.y+n.getRndIntegerUp(200,300):s.y=t.y+n.getRndIntegerUp(300,400),s.x=n.getRndIntegerUp(-this.camera.parent.width/2+100,this.camera.parent.width/2-100),t=s,this.node.addChild(s)}for(e=0;e<this.ropes.length;e++)this.ropes[e].isValid&&this.ropes[e].y<this.camera.y-this.camera.parent.height/2&&this.ropes[e].destroy()}}),cc._RF.pop()},{random:"random",score:"score"}],rope:[function(o,t,e){"use strict";var i;function n(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}cc._RF.push(t,"465adkbtJ9IWZaEXIyjLTvG","rope"),cc.Class({extends:cc.Component,properties:(i={physicsBoxCollider:null,diabolo:null,diaboloComponent:null,diaboloEffect:null,used:!1,leftNode:null,rightNode:null,leftJoint:null},n(i,"leftJoint",null),n(i,"isDisappear",!1),i),onLoad:function(){this.diabolo=cc.find("Canvas/diabolo"),this.physicsBoxCollider=this.node.getComponent(cc.PhysicsBoxCollider),this.diaboloComponent=this.diabolo.getComponent("diabolo"),this.diaboloEffect=this.diabolo.getComponent("diabolo_effect"),this.leftNode=this.node.getChildByName("left"),this.rightNode=this.node.getChildByName("right"),this.leftJoint=this.leftNode.getComponent(cc.DistanceJoint),this.rightJoint=this.rightNode.getComponent(cc.DistanceJoint),this.physicsBoxCollider.enabled=!1},start:function(){},bandLRJoint:function(){this.leftJoint.connectedBody=this.diaboloComponent.rigidbody,this.rightJoint.connectedBody=this.diaboloComponent.rigidbody,this.leftJoint.enabled=!0,this.rightJoint.enabled=!0,this.leftJoint.apply(),this.rightJoint.apply(),this.diaboloComponent.rope=this.node,this.diaboloComponent.leftNode=this.leftNode,this.diaboloComponent.rightNode=this.rightNode,this.diaboloComponent.leftJoint=this.leftJoint,this.diaboloComponent.rightJoint=this.rightJoint,this.diaboloComponent.physicsBoxCollider=this.physicsBoxCollider},bandMouseJoint:function(){this.diabolo.addComponent(cc.MouseJoint),this.diaboloComponent.mouseJoint=this.diabolo.getComponent(cc.MouseJoint)},onCollisionExit:function(o,t){this.diaboloComponent.rigidbody.linearVelocity.y<0&&this.diaboloComponent.isFly&&(this.used||((this.diaboloEffect.big||this.diaboloEffect.small)&&this.diaboloEffect.smallOrBigTime--,this.used=!0),this.bandLRJoint(),this.bandMouseJoint(),this.diaboloComponent.isFly=!1,this.physicsBoxCollider.enabled=!0)},update:function(o){this.isDisappear&&(this.node.opacity-=35,this.node.opacity<=0&&this.node.destroy())}}),cc._RF.pop()},{}],scoreUp:[function(o,t,e){"use strict";cc._RF.push(t,"3ffa8FIcWhECK9qUA0zzSG9","scoreUp"),cc.Class({extends:cc.Component,properties:{label:null,labelComponent:null,pickUpAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.label=cc.find("Canvas/Main Camera/label"),this.labelComponent=this.label.getComponent("label"),this.diabolo=cc.find("Canvas/diabolo"),this.diaboloComponent=this.diabolo.getComponent("diabolo")},onCollisionEnter:function(o,t){this.diaboloComponent.isFly&&(this.labelComponent.height+=2e3,cc.audioEngine.playEffect(this.pickUpAudio,!1),this.node.destroy())},start:function(){}}),cc._RF.pop()},{}],score:[function(o,t,e){"use strict";cc._RF.push(t,"1471caUFv9Ph5nS5It/8oIK","score"),t.exports={score:0},cc._RF.pop()},{}],showScore:[function(o,t,e){"use strict";cc._RF.push(t,"0ae15t8Lw9N67bhRZZh5hbb","showScore");var i=o("score");cc.Class({extends:cc.Component,properties:{bestScore:{default:null,type:cc.Label},nowScore:{default:null,type:cc.Label}},start:function(){var o=cc.sys.localStorage.getItem("score"),t="";(""==o||null==o||parseInt(o)<parseInt(i.score))&&(cc.sys.localStorage.setItem("score",i.score),o=i.score,t=" NEW !"),this.bestScore.string=o,this.nowScore.string=i.score+t}}),cc._RF.pop()},{score:"score"}],smallStar:[function(o,t,e){"use strict";cc._RF.push(t,"5d1f0ihJFxO5biWYQ0m1ePE","smallStar"),cc.Class({extends:cc.Component,properties:{diabolo:null,diaboloComponent:null,diaboloEffect:null,pickUpAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.diabolo=cc.find("Canvas/diabolo"),this.diaboloComponent=this.diabolo.getComponent("diabolo"),this.diaboloEffect=this.diabolo.getComponent("diabolo_effect")},onCollisionEnter:function(o,t){this.diaboloComponent.isFly&&(this.diabolo.scale=1,this.diaboloComponent.rigidbody.gravityScale=8,this.diaboloEffect.small=!0,cc.audioEngine.playEffect(this.pickUpAudio,!1),this.node.destroy())},start:function(){}}),cc._RF.pop()},{}]},{},["backgrounds","bigStar","blingRope","camera","diabolo","diabolo_effect","effects","flyEffect","game","gameReStart","jumpEffect","label","lineTo","physics-settings","random","rope","ropes","score","scoreUp","showScore","smallStar"]);