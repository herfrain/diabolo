{"version":3,"sources":["diabolo_effect.js"],"names":["cc","Class","extends","Component","properties","diabolo","diaboloComponent","big","small","smallOrBigTime","jump","jumpTime","ropesNode","ropes","onLoad","find","getComponent","children","start","update","dt","scale","rigidbody","gravityScale","linearVelocity","y","i","length","ropeComponent","isDisappear","loader","loadRes","err","resource","rope","instantiate","x","node","parent","addChild","scheduleOnce","destroy"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAQ,IADA;AAERC,0BAAiB,IAFT;AAGRC,aAAI,KAHI;AAIRC,eAAM,KAJE;AAKRC,wBAAe,CALP;AAMRC,cAAK,KANG;AAORC,kBAAS,CAPD;AAQRC,mBAAU,IARF;AASRC,eAAM;AATE,KAHP;;AAeL;;AAEAC,UAjBK,oBAiBK;AACN,aAAKT,OAAL,GAAaL,GAAGe,IAAH,CAAQ,gBAAR,CAAb;AACA,aAAKT,gBAAL,GAAsB,KAAKD,OAAL,CAAaW,YAAb,CAA0B,SAA1B,CAAtB;AACA,aAAKJ,SAAL,GAAeZ,GAAGe,IAAH,CAAQ,cAAR,CAAf;AACA,aAAKF,KAAL,GAAW,KAAKD,SAAL,CAAeK,QAA1B;AACH,KAtBI;AAwBLC,SAxBK,mBAwBI,CAER,CA1BI;AA4BLC,UA5BK,kBA4BGC,EA5BH,EA4BO;AAAA;;AACR;AACA,YAAG,KAAKb,GAAL,IAAU,KAAKC,KAAlB,EAAwB;AACpB;AACA;;AAEA,gBAAG,KAAKC,cAAL,IAAqB,CAAxB,EAA0B;AAAC;AACvB;AACA,qBAAKJ,OAAL,CAAagB,KAAb,GAAmB,GAAnB,CAFsB,CAEA;AACtB,qBAAKf,gBAAL,CAAsBgB,SAAtB,CAAgCC,YAAhC,GAA6C,EAA7C;AACA,qBAAKhB,GAAL,GAAS,KAAT;AACA,qBAAKC,KAAL,GAAW,KAAX;AACA,qBAAKC,cAAL,GAAoB,CAApB,CANsB,CAMD;AACxB;AACJ;AACD;AACA,YAAG,KAAKC,IAAR,EAAa;AACT,gBAAG,KAAKJ,gBAAL,CAAsBgB,SAAtB,CAAgCE,cAAhC,CAA+CC,CAA/C,GAAiD,CAApD,EAAsD;AAAC;AACnD;AACA,qBAAI,IAAIC,IAAE,CAAV,EAAYA,IAAE,KAAKb,KAAL,CAAWc,MAAzB,EAAgCD,GAAhC,EAAoC;AAAC;AACjC,wBAAG,KAAKb,KAAL,CAAWa,CAAX,EAAcD,CAAd,GAAgB,KAAKpB,OAAL,CAAaoB,CAAb,GAAe,EAAlC,EAAqC;AACjC,4BAAIG,gBAAc,KAAKf,KAAL,CAAWa,CAAX,EAAcV,YAAd,CAA2B,MAA3B,CAAlB;AACAY,sCAAcC,WAAd,GAA0B,IAA1B;AACH;AACJ;AACD7B,mBAAG8B,MAAH,CAAUC,OAAV,CAAkB,cAAlB,EAAkC,UAACC,GAAD,EAAMC,QAAN,EAAiB;AAAC;AAChD,wBAAGD,GAAH,EAAO;AAAE;AAAS;AAClB,wBAAIE,OAAKlC,GAAGmC,WAAH,CAAeF,QAAf,CAAT,CAF+C,CAEd;AACjCC,yBAAKT,CAAL,GAAO,MAAKpB,OAAL,CAAaoB,CAAb,GAAe,GAAtB,CAH+C,CAGtB;AACzBS,yBAAKE,CAAL,GAAO,MAAK/B,OAAL,CAAa+B,CAApB;AACA,0BAAKC,IAAL,CAAUC,MAAV,CAAiBC,QAAjB,CAA0BL,IAA1B,EAL+C,CAKhB;AAC/B,0BAAKM,YAAL,CAAkB,YAAU;AAAC;AACzBN,6BAAKO,OAAL;AACH,qBAFD,EAEE,CAFF;AAGH,iBATD;AAUA,qBAAK/B,IAAL,GAAU,KAAV;AACH;AACJ;AACJ;AAlEI,CAAT","file":"diabolo_effect.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        diabolo:null,\r\n        diaboloComponent:null,\r\n        big:false,\r\n        small:false,\r\n        smallOrBigTime:0,\r\n        jump:false,\r\n        jumpTime:0,\r\n        ropesNode:null,\r\n        ropes:null,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.diabolo=cc.find(\"Canvas/diabolo\")\r\n        this.diaboloComponent=this.diabolo.getComponent(\"diabolo\")\r\n        this.ropesNode=cc.find(\"Canvas/ropes\")\r\n        this.ropes=this.ropesNode.children\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        //变大和变小效果，不是相互独立的，只能同时存在一种\r\n        if(this.big||this.small){\r\n            // this.smallOrBigTime++\r\n            // cc.log(this.smallOrBigTime)\r\n\r\n            if(this.smallOrBigTime<=0){//使用次数用完后，变回去\r\n                // cc.log(\"变回原来大小\")\r\n                this.diabolo.scale=1.5//变回原来大小\r\n                this.diaboloComponent.rigidbody.gravityScale=10\r\n                this.big=false\r\n                this.small=false\r\n                this.smallOrBigTime=5//可用5次\r\n            }\r\n        }\r\n        //跳跃监控\r\n        if(this.jump){\r\n            if(this.diaboloComponent.rigidbody.linearVelocity.y<0){//如果开始往下落，则在下方自动生成一个绳子\r\n                // cc.log(\"jump\")\r\n                for(var i=0;i<this.ropes.length;i++){//将空竹以下的绳子都清空\r\n                    if(this.ropes[i].y<this.diabolo.y+30){\r\n                        var ropeComponent=this.ropes[i].getComponent('rope')\r\n                        ropeComponent.isDisappear=true\r\n                    }\r\n                }\r\n                cc.loader.loadRes('rope2.prefab', (err, resource)=>{//rope2表示会消失的绳子\r\n                    if(err){ return; }\r\n                    var rope=cc.instantiate(resource)//克隆实例\r\n                    rope.y=this.diabolo.y-100//下方添加绳子\r\n                    rope.x=this.diabolo.x\r\n                    this.node.parent.addChild(rope)//添加绳子\r\n                    this.scheduleOnce(function(){//定时器，3秒销毁\r\n                        rope.destroy()\r\n                    },3)\r\n                });\r\n                this.jump=false\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}