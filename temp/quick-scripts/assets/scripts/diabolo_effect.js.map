{"version":3,"sources":["diabolo_effect.js"],"names":["cc","Class","extends","Component","properties","diabolo","diaboloComponent","big","small","smallOrBigTime","jump","jumpTime","ropes","default","type","Node","onLoad","find","getComponent","start","update","dt","log","scale","rigidbody","gravityScale","linearVelocity","y","loader","loadRes","err","resource","rope","instantiate","x","node","parent","addChild","scheduleOnce","destroy"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAQ,IADA;AAERC,0BAAiB,IAFT;AAGRC,aAAI,KAHI;AAIRC,eAAM,KAJE;AAKRC,wBAAe,CALP;AAMRC,cAAK,KANG;AAORC,kBAAS,CAPD;AAQRC,eAAM;AACFC,qBAAQ,IADN;AAEFC,kBAAKd,GAAGe;AAFN;AARE,KAHP;;AAiBL;;AAEAC,UAnBK,oBAmBK;AACN,aAAKX,OAAL,GAAaL,GAAGiB,IAAH,CAAQ,gBAAR,CAAb;AACA,aAAKX,gBAAL,GAAsB,KAAKD,OAAL,CAAaa,YAAb,CAA0B,SAA1B,CAAtB;AACH,KAtBI;AAwBLC,SAxBK,mBAwBI,CAER,CA1BI;AA4BLC,UA5BK,kBA4BGC,EA5BH,EA4BO;AAAA;;AACR;AACA,YAAG,KAAKd,GAAL,IAAU,KAAKC,KAAlB,EAAwB;AACpB,iBAAKC,cAAL;AACA;AACA,gBAAG,KAAKA,cAAL,IAAqB,GAAxB,EAA4B;AACxBT,mBAAGsB,GAAH,CAAO,QAAP;AACA,qBAAKjB,OAAL,CAAakB,KAAb,GAAmB,GAAnB,CAFwB,CAEF;AACtB,qBAAKjB,gBAAL,CAAsBkB,SAAtB,CAAgCC,YAAhC,GAA6C,EAA7C;AACA,qBAAKlB,GAAL,GAAS,KAAT;AACA,qBAAKC,KAAL,GAAW,KAAX;AACA,qBAAKC,cAAL,GAAoB,CAApB;AACH;AACJ;AACD;AACA,YAAG,KAAKC,IAAR,EAAa;AACT,gBAAG,KAAKJ,gBAAL,CAAsBkB,SAAtB,CAAgCE,cAAhC,CAA+CC,CAA/C,GAAiD,CAApD,EAAsD;AAAC;AACnD3B,mBAAGsB,GAAH,CAAO,MAAP;AACAtB,mBAAG4B,MAAH,CAAUC,OAAV,CAAkB,aAAlB,EAAiC,UAACC,GAAD,EAAMC,QAAN,EAAiB;AAC9C,wBAAGD,GAAH,EAAO;AAAE;AAAS;AAClB,wBAAIE,OAAKhC,GAAGiC,WAAH,CAAeF,QAAf,CAAT,CAF8C,CAEb;AACjCC,yBAAKL,CAAL,GAAO,MAAKtB,OAAL,CAAasB,CAAb,GAAe,GAAtB,CAH8C,CAGrB;AACzBK,yBAAKE,CAAL,GAAO,MAAK7B,OAAL,CAAa6B,CAApB;AACA,0BAAKC,IAAL,CAAUC,MAAV,CAAiBC,QAAjB,CAA0BL,IAA1B,EAL8C,CAKf;AAC/B,0BAAKM,YAAL,CAAkB,YAAU;AAAC;AACzBN,6BAAKO,OAAL;AACH,qBAFD,EAEE,CAFF;AAGH,iBATD;AAUA,qBAAK7B,IAAL,GAAU,KAAV;AACH;AACJ;AACJ;AA3DI,CAAT","file":"diabolo_effect.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        diabolo:null,\r\n        diaboloComponent:null,\r\n        big:false,\r\n        small:false,\r\n        smallOrBigTime:0,\r\n        jump:false,\r\n        jumpTime:0,\r\n        ropes:{\r\n            default:null,\r\n            type:cc.Node\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.diabolo=cc.find(\"Canvas/diabolo\")\r\n        this.diaboloComponent=this.diabolo.getComponent(\"diabolo\")\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        //变大和变小效果，不是相互独立的，只能同时存在一种\r\n        if(this.big||this.small){\r\n            this.smallOrBigTime++\r\n            // cc.log(this.smallOrBigTime)\r\n            if(this.smallOrBigTime>=300){\r\n                cc.log(\"变回原来大小\")\r\n                this.diabolo.scale=1.5//变回原来大小\r\n                this.diaboloComponent.rigidbody.gravityScale=10\r\n                this.big=false\r\n                this.small=false\r\n                this.smallOrBigTime=0\r\n            }\r\n        }\r\n        //跳跃监控\r\n        if(this.jump){\r\n            if(this.diaboloComponent.rigidbody.linearVelocity.y<0){//如果开始往下落，则在下方自动生成一个绳子\r\n                cc.log(\"jump\")\r\n                cc.loader.loadRes('rope.prefab', (err, resource)=>{\r\n                    if(err){ return; }\r\n                    var rope=cc.instantiate(resource)//克隆实例\r\n                    rope.y=this.diabolo.y-200//下方添加绳子\r\n                    rope.x=this.diabolo.x\r\n                    this.node.parent.addChild(rope)//添加绳子\r\n                    this.scheduleOnce(function(){//定时器，3秒销毁\r\n                        rope.destroy()\r\n                    },3)\r\n                });\r\n                this.jump=false\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}