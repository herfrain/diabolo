{"version":3,"sources":["label.js"],"names":["sc","require","cc","Class","extends","Component","properties","height","preH","heightDifference","once","label","diabolo","diaboloComponent","onLoad","find","getComponent","node","Label","string","score","start","rope","convertToWorldSpaceAR","v2","y","update","dt","isFly","h","parseInt","labelHeight"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,KAAGC,QAAQ,OAAR,CAAP;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAO,CADC,EACC;AACTC,cAAK,CAFG,EAED;AACPC,0BAAiB,CAHT,EAGW;AACnBC,cAAK,IAJG,EAIE;AACVC,eAAM,IALE;AAMRC,iBAAQ,IANA,EAMK;AACbC,0BAAiB,IAPT,CAOc;AAPd,KAHP;;AAaL;;AAEAC,UAfK,oBAeK;AACN,aAAKF,OAAL,GAAaV,GAAGa,IAAH,CAAQ,gBAAR,CAAb;AACA,aAAKF,gBAAL,GAAsB,KAAKD,OAAL,CAAaI,YAAb,CAA0B,SAA1B,CAAtB,CAFM,CAEoD;AAC1D,aAAKL,KAAL,GAAW,KAAKM,IAAL,CAAUD,YAAV,CAAuBd,GAAGgB,KAA1B,CAAX,CAHM,CAGqC;AAC3C,aAAKP,KAAL,CAAWQ,MAAX,GAAkB,GAAlB;AACAnB,WAAGoB,KAAH,GAAS,KAAKb,MAAd;AACH,KArBI;AAuBLc,SAvBK,mBAuBI;AACL,aAAKb,IAAL,GAAU,KAAKK,gBAAL,CAAsBS,IAAtB,CAA2BC,qBAA3B,CAAiDrB,GAAGsB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAjD,EAA6DC,CAAvE;AACH,KAzBI;AA2BLC,UA3BK,kBA2BGC,EA3BH,EA2BO;AACR;AACA,YAAG,CAAC,KAAKd,gBAAL,CAAsBe,KAAvB,IAA8B,KAAKlB,IAAtC,EAA2C;AAAC;AACxC,iBAAKA,IAAL,GAAU,KAAV;AACA,gBAAImB,IAAE,KAAKhB,gBAAL,CAAsBS,IAAtB,CAA2BC,qBAA3B,CAAiDrB,GAAGsB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAjD,EAA6DC,CAA7D,GAA+D,KAAKjB,IAA1E,CAFuC,CAEuC;AAC9E,iBAAKD,MAAL,IAAasB,CAAb,CAHuC,CAGzB;AACd,iBAAKtB,MAAL,GAAYuB,SAAS,KAAKvB,MAAd,CAAZ;AACA,iBAAKC,IAAL,GAAU,KAAKK,gBAAL,CAAsBS,IAAtB,CAA2BC,qBAA3B,CAAiDrB,GAAGsB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAjD,EAA6DC,CAAvE,CALuC,CAKiC;AACxE;AACA;AACH,SARD,MAQM,IAAG,KAAKZ,gBAAL,CAAsBe,KAAtB,IAA6B,CAAC,KAAKlB,IAAtC,EAA2C;AAAC;AAC9C,iBAAKA,IAAL,GAAU,IAAV;AACH;AACD,YAAIqB,cAAYD,SAAS,KAAKnB,KAAL,CAAWQ,MAApB,CAAhB;AACA,YAAGY,cAAY,KAAKxB,MAApB,EAA2B;AACvBwB,2BAAa,EAAb;AACA,iBAAKpB,KAAL,CAAWQ,MAAX,GAAkBW,SAASC,WAAT,CAAlB;AACH,SAHD,MAGM,IAAGA,cAAY,KAAKxB,MAApB,EAA2B;AAC7BwB;AACA,iBAAKpB,KAAL,CAAWQ,MAAX,GAAkBW,SAASC,WAAT,CAAlB;AACH;AACD/B,WAAGoB,KAAH,GAAS,KAAKb,MAAd;AACH;AAjDI,CAAT","file":"label.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nvar sc=require('score')\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        height:0,//高度\r\n        preH:0,//前一个绳子的高度\r\n        heightDifference:0,//每次的高度差\r\n        once:true,//限制只变化一次\r\n        label:null,\r\n        diabolo:null,//空竹对象\r\n        diaboloComponent:null,//空竹组件\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.diabolo=cc.find(\"Canvas/diabolo\")\r\n        this.diaboloComponent=this.diabolo.getComponent(\"diabolo\")//获取组件\r\n        this.label=this.node.getComponent(cc.Label)//获取label组件\r\n        this.label.string=\"0\"\r\n        sc.score=this.height\r\n    },\r\n\r\n    start () {\r\n        this.preH=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y\r\n    },\r\n\r\n    update (dt) {\r\n        //当空竹调到一条rope上时，记录高度差，加入高度统计\r\n        if(!this.diaboloComponent.isFly&&this.once){//只进入一次\r\n            this.once=false\r\n            var h=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y-this.preH//高度差，这个绳子高度-之前绳子的高度\r\n            this.height+=h//把高度差相加\r\n            this.height=parseInt(this.height)\r\n            this.preH=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y//这个绳子变为前一个绳子\r\n            // this.label.string=parseInt(this.height)+\"m\"//更改label的string显示\r\n            // cc.log(\"height:\"+this.height)\r\n        }else if(this.diaboloComponent.isFly&&!this.once){//飞行时，将once改回来\r\n            this.once=true\r\n        }\r\n        var labelHeight=parseInt(this.label.string)\r\n        if(labelHeight<this.height){\r\n            labelHeight+=11\r\n            this.label.string=parseInt(labelHeight)\r\n        }else if(labelHeight>this.height){\r\n            labelHeight--\r\n            this.label.string=parseInt(labelHeight)\r\n        }\r\n        sc.score=this.height\r\n    },\r\n});"]}