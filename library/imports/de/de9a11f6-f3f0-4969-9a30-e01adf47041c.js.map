{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\diabolo_effect.js"],"names":["cc","Class","extends","Component","properties","diabolo","diaboloComponent","big","small","smallOrBigTime","jump","jumpTime","onLoad","find","getComponent","start","update","dt","log","scale","rigidbody","gravityScale","linearVelocity","y","loader","loadRes","err","resource","rope","instantiate","x","node","parent","addChild","scheduleOnce","destroy"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAQ,IADA;AAERC,0BAAiB,IAFT;AAGRC,aAAI,KAHI;AAIRC,eAAM,KAJE;AAKRC,wBAAe,CALP;AAMRC,cAAK,KANG;AAORC,kBAAS;AAPD,KAHP;;AAaL;;AAEAC,UAfK,oBAeK;AACN,aAAKP,OAAL,GAAaL,GAAGa,IAAH,CAAQ,gBAAR,CAAb;AACA,aAAKP,gBAAL,GAAsB,KAAKD,OAAL,CAAaS,YAAb,CAA0B,SAA1B,CAAtB;AACH,KAlBI;AAoBLC,SApBK,mBAoBI,CAER,CAtBI;AAwBLC,UAxBK,kBAwBGC,EAxBH,EAwBO;AAAA;;AACR;AACA,YAAG,KAAKV,GAAL,IAAU,KAAKC,KAAlB,EAAwB;AACpB,iBAAKC,cAAL;AACA;AACA,gBAAG,KAAKA,cAAL,IAAqB,GAAxB,EAA4B;AACxBT,mBAAGkB,GAAH,CAAO,QAAP;AACA,qBAAKb,OAAL,CAAac,KAAb,GAAmB,GAAnB,CAFwB,CAEF;AACtB,qBAAKb,gBAAL,CAAsBc,SAAtB,CAAgCC,YAAhC,GAA6C,EAA7C;AACA,qBAAKd,GAAL,GAAS,KAAT;AACA,qBAAKC,KAAL,GAAW,KAAX;AACA,qBAAKC,cAAL,GAAoB,CAApB;AACH;AACJ;AACD;AACA,YAAG,KAAKC,IAAR,EAAa;AACT,gBAAG,KAAKJ,gBAAL,CAAsBc,SAAtB,CAAgCE,cAAhC,CAA+CC,CAA/C,GAAiD,CAApD,EAAsD;AAAC;AACnDvB,mBAAGkB,GAAH,CAAO,MAAP;AACAlB,mBAAGwB,MAAH,CAAUC,OAAV,CAAkB,cAAlB,EAAkC,UAACC,GAAD,EAAMC,QAAN,EAAiB;AAAC;AAChD,wBAAGD,GAAH,EAAO;AAAE;AAAS;AAClB,wBAAIE,OAAK5B,GAAG6B,WAAH,CAAeF,QAAf,CAAT,CAF+C,CAEd;AACjCC,yBAAKL,CAAL,GAAO,MAAKlB,OAAL,CAAakB,CAAb,GAAe,GAAtB,CAH+C,CAGtB;AACzBK,yBAAKE,CAAL,GAAO,MAAKzB,OAAL,CAAayB,CAApB;AACA,0BAAKC,IAAL,CAAUC,MAAV,CAAiBC,QAAjB,CAA0BL,IAA1B,EAL+C,CAKhB;AAC/B,0BAAKM,YAAL,CAAkB,YAAU;AAAC;AACzBN,6BAAKO,OAAL;AACH,qBAFD,EAEE,CAFF;AAGH,iBATD;AAUA,qBAAKzB,IAAL,GAAU,KAAV;AACH;AACJ;AACJ;AAvDI,CAAT","file":"diabolo_effect.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        diabolo:null,\r\n        diaboloComponent:null,\r\n        big:false,\r\n        small:false,\r\n        smallOrBigTime:0,\r\n        jump:false,\r\n        jumpTime:0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.diabolo=cc.find(\"Canvas/diabolo\")\r\n        this.diaboloComponent=this.diabolo.getComponent(\"diabolo\")\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    update (dt) {\r\n        //变大和变小效果，不是相互独立的，只能同时存在一种\r\n        if(this.big||this.small){\r\n            this.smallOrBigTime++\r\n            // cc.log(this.smallOrBigTime)\r\n            if(this.smallOrBigTime>=300){\r\n                cc.log(\"变回原来大小\")\r\n                this.diabolo.scale=1.5//变回原来大小\r\n                this.diaboloComponent.rigidbody.gravityScale=10\r\n                this.big=false\r\n                this.small=false\r\n                this.smallOrBigTime=0\r\n            }\r\n        }\r\n        //跳跃监控\r\n        if(this.jump){\r\n            if(this.diaboloComponent.rigidbody.linearVelocity.y<0){//如果开始往下落，则在下方自动生成一个绳子\r\n                cc.log(\"jump\")\r\n                cc.loader.loadRes('rope2.prefab', (err, resource)=>{//rope2表示会消失的绳子\r\n                    if(err){ return; }\r\n                    var rope=cc.instantiate(resource)//克隆实例\r\n                    rope.y=this.diabolo.y-200//下方添加绳子\r\n                    rope.x=this.diabolo.x\r\n                    this.node.parent.addChild(rope)//添加绳子\r\n                    this.scheduleOnce(function(){//定时器，3秒销毁\r\n                        rope.destroy()\r\n                    },3)\r\n                });\r\n                this.jump=false\r\n            }\r\n        }\r\n    },\r\n});\r\n"]}