{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\label.js"],"names":["cc","Class","extends","Component","properties","height","preH","heightDifference","once","label","diabolo","diaboloComponent","camera","cameraComponent","onLoad","find","getComponent","node","Label","string","start","rope","convertToWorldSpaceAR","v2","y","update","dt","isFly","h","log","labelHeight","parseInt"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAO,CADC,EACC;AACTC,cAAK,CAFG,EAED;AACPC,0BAAiB,CAHT,EAGW;AACnBC,cAAK,IAJG,EAIE;AACVC,eAAM,IALE;AAMRC,iBAAQ,IANA,EAMK;AACbC,0BAAiB,IAPT,EAOc;AACtBC,gBAAO,IARC;AASRC,yBAAgB;AATR,KAHP;;AAeL;;AAEAC,UAjBK,oBAiBK;AACN,aAAKJ,OAAL,GAAaV,GAAGe,IAAH,CAAQ,gBAAR,CAAb;AACA,aAAKH,MAAL,GAAYZ,GAAGe,IAAH,CAAQ,oBAAR,CAAZ;AACA,aAAKJ,gBAAL,GAAsB,KAAKD,OAAL,CAAaM,YAAb,CAA0B,SAA1B,CAAtB,CAHM,CAGoD;AAC1D,aAAKP,KAAL,GAAW,KAAKQ,IAAL,CAAUD,YAAV,CAAuBhB,GAAGkB,KAA1B,CAAX,CAJM,CAIqC;AAC3C,aAAKT,KAAL,CAAWU,MAAX,GAAkB,CAAlB;AACA,aAAKN,eAAL,GAAqB,KAAKD,MAAL,CAAYI,YAAZ,CAAyB,QAAzB,CAArB;AACH,KAxBI;AA0BLI,SA1BK,mBA0BI;AACL,aAAKd,IAAL,GAAU,KAAKK,gBAAL,CAAsBU,IAAtB,CAA2BC,qBAA3B,CAAiDtB,GAAGuB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAjD,EAA6DC,CAAvE;AACH,KA5BI;AA8BLC,UA9BK,kBA8BGC,EA9BH,EA8BO;AACR;AACA,YAAG,CAAC,KAAKf,gBAAL,CAAsBgB,KAAvB,IAA8B,KAAKnB,IAAtC,EAA2C;AAAC;AACxC,iBAAKA,IAAL,GAAU,KAAV;AACA,gBAAIoB,IAAE,KAAKjB,gBAAL,CAAsBU,IAAtB,CAA2BC,qBAA3B,CAAiDtB,GAAGuB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAjD,EAA6DC,CAA7D,GAA+D,KAAKlB,IAA1E,CAFuC,CAEuC;AAC9E,iBAAKO,eAAL,CAAqBN,gBAArB,GAAsCqB,CAAtC,CAHuC,CAGA;AACvC;AACA,iBAAKvB,MAAL,IAAauB,CAAb,CALuC,CAKzB;AACd,iBAAKtB,IAAL,GAAU,KAAKK,gBAAL,CAAsBU,IAAtB,CAA2BC,qBAA3B,CAAiDtB,GAAGuB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAjD,EAA6DC,CAAvE,CANuC,CAMiC;AACxE;AACAxB,eAAG6B,GAAH,CAAO,YAAU,KAAKxB,MAAtB;AACH,SATD,MASM,IAAG,KAAKM,gBAAL,CAAsBgB,KAAtB,IAA6B,CAAC,KAAKnB,IAAtC,EAA2C;AAAC;AAC9C,iBAAKA,IAAL,GAAU,IAAV;AACH;AACD,YAAIsB,cAAYC,SAAS,KAAKtB,KAAL,CAAWU,MAApB,CAAhB;AACA,YAAGW,cAAY,KAAKzB,MAApB,EAA2B;AACvByB,2BAAa,EAAb;AACA,iBAAKrB,KAAL,CAAWU,MAAX,GAAkBY,SAASD,WAAT,IAAsB,GAAxC;AACH;AACJ;AAjDI,CAAT","file":"label.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        height:0,//高度\r\n        preH:0,//前一个绳子的高度\r\n        heightDifference:0,//每次的高度差\r\n        once:true,//限制只变化一次\r\n        label:null,\r\n        diabolo:null,//空竹对象\r\n        diaboloComponent:null,//空竹组件\r\n        camera:null,\r\n        cameraComponent:null,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.diabolo=cc.find(\"Canvas/diabolo\")\r\n        this.camera=cc.find(\"Canvas/Main Camera\")\r\n        this.diaboloComponent=this.diabolo.getComponent(\"diabolo\")//获取组件\r\n        this.label=this.node.getComponent(cc.Label)//获取label组件\r\n        this.label.string=0\r\n        this.cameraComponent=this.camera.getComponent(\"camera\")\r\n    },\r\n\r\n    start () {\r\n        this.preH=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y\r\n    },\r\n\r\n    update (dt) {\r\n        //当空竹调到一条rope上时，记录高度差，加入高度统计\r\n        if(!this.diaboloComponent.isFly&&this.once){//只进入一次\r\n            this.once=false\r\n            var h=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y-this.preH//高度差，这个绳子高度-之前绳子的高度\r\n            this.cameraComponent.heightDifference=h//设置camera里的高度差属性\r\n            // this.node.y+=h//label的高度也要对应改变\r\n            this.height+=h//把高度差相加\r\n            this.preH=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y//这个绳子变为前一个绳子\r\n            // this.label.string=parseInt(this.height)+\"m\"//更改label的string显示\r\n            cc.log(\"height:\"+this.height)\r\n        }else if(this.diaboloComponent.isFly&&!this.once){//飞行时，将once改回来\r\n            this.once=true\r\n        }\r\n        var labelHeight=parseInt(this.label.string)\r\n        if(labelHeight<this.height){\r\n            labelHeight+=11\r\n            this.label.string=parseInt(labelHeight)+\"m\"\r\n        }\r\n    },\r\n});\r\n"]}