{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\label.js"],"names":["cc","Class","extends","Component","properties","height","preH","heightDifference","once","label","diabolo","default","type","Node","diaboloComponent","camera","cameraComponent","onLoad","getComponent","node","Label","string","start","rope","convertToWorldSpaceAR","v2","y","update","dt","isFly","h","log","labelHeight","parseInt"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAO,CADC,EACC;AACTC,cAAK,CAFG,EAED;AACPC,0BAAiB,CAHT,EAGW;AACnBC,cAAK,IAJG,EAIE;AACVC,eAAM,IALE;AAMRC,iBAAQ;AACJC,qBAAQ,IADJ;AAEJC,kBAAKZ,GAAGa;AAFJ,SANA,EASN;AACFC,0BAAiB,IAVT,EAUc;AACtBC,gBAAO;AACHJ,qBAAQ,IADL;AAEHC,kBAAKZ,GAAGa;AAFL,SAXC;AAeRG,yBAAgB;AAfR,KAHP;;AAqBL;;AAEAC,UAvBK,oBAuBK;AACN,aAAKH,gBAAL,GAAsB,KAAKJ,OAAL,CAAaQ,YAAb,CAA0B,SAA1B,CAAtB,CADM,CACoD;AAC1D,aAAKT,KAAL,GAAW,KAAKU,IAAL,CAAUD,YAAV,CAAuBlB,GAAGoB,KAA1B,CAAX,CAFM,CAEqC;AAC3C,aAAKX,KAAL,CAAWY,MAAX,GAAkB,CAAlB;AACA,aAAKL,eAAL,GAAqB,KAAKD,MAAL,CAAYG,YAAZ,CAAyB,QAAzB,CAArB;AACH,KA5BI;AA8BLI,SA9BK,mBA8BI;AACL,aAAKhB,IAAL,GAAU,KAAKQ,gBAAL,CAAsBS,IAAtB,CAA2BC,qBAA3B,CAAiDxB,GAAGyB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAjD,EAA6DC,CAAvE;AACH,KAhCI;AAkCLC,UAlCK,kBAkCGC,EAlCH,EAkCO;AACR;AACA,YAAG,CAAC,KAAKd,gBAAL,CAAsBe,KAAvB,IAA8B,KAAKrB,IAAtC,EAA2C;AAAC;AACxC,iBAAKA,IAAL,GAAU,KAAV;AACA,gBAAIsB,IAAE,KAAKhB,gBAAL,CAAsBS,IAAtB,CAA2BC,qBAA3B,CAAiDxB,GAAGyB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAjD,EAA6DC,CAA7D,GAA+D,KAAKpB,IAA1E,CAFuC,CAEuC;AAC9E,iBAAKU,eAAL,CAAqBT,gBAArB,GAAsCuB,CAAtC,CAHuC,CAGA;AACvC;AACA,iBAAKzB,MAAL,IAAayB,CAAb,CALuC,CAKzB;AACd,iBAAKxB,IAAL,GAAU,KAAKQ,gBAAL,CAAsBS,IAAtB,CAA2BC,qBAA3B,CAAiDxB,GAAGyB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAjD,EAA6DC,CAAvE,CANuC,CAMiC;AACxE;AACA1B,eAAG+B,GAAH,CAAO,YAAU,KAAK1B,MAAtB;AACH,SATD,MASM,IAAG,KAAKS,gBAAL,CAAsBe,KAAtB,IAA6B,CAAC,KAAKrB,IAAtC,EAA2C;AAAC;AAC9C,iBAAKA,IAAL,GAAU,IAAV;AACH;AACD,YAAIwB,cAAYC,SAAS,KAAKxB,KAAL,CAAWY,MAApB,CAAhB;AACA,YAAGW,cAAY,KAAK3B,MAApB,EAA2B;AACvB2B,2BAAa,EAAb;AACA,iBAAKvB,KAAL,CAAWY,MAAX,GAAkBY,SAASD,WAAT,IAAsB,GAAxC;AACH;AACJ;AArDI,CAAT","file":"label.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        height:0,//高度\r\n        preH:0,//前一个绳子的高度\r\n        heightDifference:0,//每次的高度差\r\n        once:true,//限制只变化一次\r\n        label:null,\r\n        diabolo:{\r\n            default:null,\r\n            type:cc.Node\r\n        },//空竹对象\r\n        diaboloComponent:null,//空竹组件\r\n        camera:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        cameraComponent:null,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.diaboloComponent=this.diabolo.getComponent(\"diabolo\")//获取组件\r\n        this.label=this.node.getComponent(cc.Label)//获取label组件\r\n        this.label.string=0\r\n        this.cameraComponent=this.camera.getComponent(\"camera\")\r\n    },\r\n\r\n    start () {\r\n        this.preH=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y\r\n    },\r\n\r\n    update (dt) {\r\n        //当空竹调到一条rope上时，记录高度差，加入高度统计\r\n        if(!this.diaboloComponent.isFly&&this.once){//只进入一次\r\n            this.once=false\r\n            var h=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y-this.preH//高度差，这个绳子高度-之前绳子的高度\r\n            this.cameraComponent.heightDifference=h//设置camera里的高度差属性\r\n            // this.node.y+=h//label的高度也要对应改变\r\n            this.height+=h//把高度差相加\r\n            this.preH=this.diaboloComponent.rope.convertToWorldSpaceAR(cc.v2(0,0)).y//这个绳子变为前一个绳子\r\n            // this.label.string=parseInt(this.height)+\"m\"//更改label的string显示\r\n            cc.log(\"height:\"+this.height)\r\n        }else if(this.diaboloComponent.isFly&&!this.once){//飞行时，将once改回来\r\n            this.once=true\r\n        }\r\n        var labelHeight=parseInt(this.label.string)\r\n        if(labelHeight<this.height){\r\n            labelHeight+=11\r\n            this.label.string=parseInt(labelHeight)+\"m\"\r\n        }\r\n    },\r\n});\r\n"]}