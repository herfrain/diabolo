{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\game.js"],"names":["effects","require","cc","Class","extends","Component","properties","diabolo","default","type","Node","camera","label","gameOverAudio","AudioClip","onLoad","game","addPersistRootNode","gameOver","log","audioEngine","playEffect","director","loadScene","start","update","dt","isValid"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;;AAEAC,GAAGC,KAAH;AACIC,aAASF,GAAGG,SADhB;;AAGIC,gBAAY;AACRC,iBAAQ;AACJC,qBAAQ,IADJ;AAEJC,kBAAKP,GAAGQ;AAFJ,SADA;AAKRC,gBAAO;AACHH,qBAAQ,IADL;AAEHC,kBAAKP,GAAGQ;AAFL,SALC;AASRE,eAAM;AACFJ,qBAAQ,IADN;AAEFC,kBAAKP,GAAGQ;AAFN,SATE;AAaRG,uBAAe;AACXL,qBAAS,IADE;AAEXC,kBAAMP,GAAGY;AAFE,SAbP,CAgBN;AACF;AAjBQ,KAHhB;;AAuBI;;AAEAC,UAzBJ,oBAyBc;AACN;AACAb,WAAGc,IAAH,CAAQC,kBAAR,CAA2B,KAAKL,KAAhC;AAEH,KA7BL;;;AA+BI;AACA;AACA;AACA;AACA;AACA;;AAEA;AACAM,cAAU,oBAAY;AAClBhB,WAAGiB,GAAH,CAAO,WAAP;AACAjB,WAAGkB,WAAH,CAAeC,UAAf,CAA0B,KAAKR,aAA/B,EAA8C,KAA9C;AACAX,WAAGoB,QAAH,CAAYC,SAAZ,CAAsB,SAAtB,EAHkB,CAGe;AACjC;AACA;AACH,KA7CL;;AA+CIC,SA/CJ,mBA+Ca;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACH,KAhEL;AAkEIC,UAlEJ,kBAkEYC,EAlEZ,EAkEgB;AACR,YAAG,CAAC,KAAKnB,OAAL,CAAaoB,OAAjB,EAAyB;AAAC;AACtB;AACA,iBAAKT,QAAL;AACA;AACH;AAEJ;AAzEL,6BA2EYQ,EA3EZ,EA2EgB;AACR,QAAG,CAAC,KAAKnB,OAAL,CAAaoB,OAAjB,EAAyB;AAAC;AACtB;AACA,aAAKT,QAAL;AACA;AACH;AACJ,CAjFL","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nvar effects = require(\"effects\")\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        diabolo:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        camera:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        label:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        gameOverAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },//死亡音效\r\n        // effect:effects.effects,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        // this.enabled=false\r\n        cc.game.addPersistRootNode(this.label)\r\n        \r\n    },\r\n\r\n    // //开始游戏\r\n    // gameStart:function(){\r\n    //     this.enabled=true\r\n    //     this.camera.enabled=true\r\n    //     this.startButton.active=false\r\n    // },\r\n\r\n    //结束游戏\r\n    gameOver: function () {\r\n        cc.log(\"game over\")\r\n        cc.audioEngine.playEffect(this.gameOverAudio, false);\r\n        cc.director.loadScene('restart');//重新加载游戏场景\r\n        // this.startButton.active=true\r\n        // this.startButton.x=this.camera.x\r\n    },\r\n\r\n    start () {\r\n        // console.log(\"开始计时\");\r\n        // this.schedule(function() {\r\n        //     console.log(\"进入计时函数\");\r\n        //     var randNum = effects.getRandomNum();\r\n            \r\n        //     var item = effects.getItem(randNum);\r\n        //     cc.loader.loadRes(item, function(err, prefab) {\r\n        //         var newNode = cc.instantiate(prefab);\r\n        //         console.log(\"生成道具\");\r\n        //         newNode.parent = cc.director.getScene();\r\n        //         newNode.x = Math.random()*700;\r\n        //         newNode.y = Math.random()*700;\r\n        //         // cc.director.getScene().addChild(newNode);\r\n\r\n        //     });\r\n        // }, (Math.random()*30)+30 );\r\n    },\r\n\r\n    update (dt) {\r\n        if(!this.diabolo.isValid){//如果空竹消失，则游戏结束\r\n            // cc.log(this.diabolo.isValid)\r\n            this.gameOver()\r\n            return\r\n        } \r\n        \r\n    },\r\n\r\n    update (dt) {\r\n        if(!this.diabolo.isValid){//如果空竹消失，则游戏结束\r\n            // cc.log(this.diabolo.isValid)\r\n            this.gameOver()\r\n            return\r\n        }\r\n    },\r\n});\r\n"]}